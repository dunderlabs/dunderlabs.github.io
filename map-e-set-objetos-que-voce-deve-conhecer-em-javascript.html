<!doctype html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <meta name="description" content="
    4 amigos com gostos igualmente parecidos e diferentes, reunindo
    conhecimento, experiências e muitas dúvidas sobre: Front-End,
    Python/Django, Linux, JS e etc. Devolvemos à comunidade o que em muitos
    momentos ela nos ofereceu.
">
    <meta name="keywords" content="pug-pi, python, parnaiba, desenvolvimento, web, django"/>
    <meta name="generator" content="Feito com Pure, Pelican, Python e Sublime. ">

    <!-- OpenGraph -->
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Map e Set: objetos que você deve conhecer em JavaScript"/>
    <meta property="og:url" content="https://dunderlabs.github.io/map-e-set-objetos-que-voce-deve-conhecer-em-javascript.html"/>
    <meta property="og:site_name" content="__labs__"/>
    <meta property="og:description" content="Map e Set podem parecer tipos totalmente novos, mas eles são velhos conhecidos da linguagem só que com superpoderes."/>
    <meta property="og:image" content="https://dunderlabs.github.io/images/posts/map-e-set-objetos-que-voce-deve-conhecer-em-javascript/post-cover.png"/>

    <!-- Twitter -->
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@dunderlabs"/>
    <meta name="twitter:creator" content="@niltoncsr"/>
    <meta name="twitter:domain" content="dunderlabs.github.io"/>
    <meta name="twitter:title" content="Map e Set: objetos que você deve conhecer em JavaScript"/>
    <meta name="twitter:description" content="Map e Set podem parecer tipos totalmente novos, mas eles são velhos conhecidos da linguagem só que com superpoderes."/>
    <meta name="twitter:image:src" content="https://dunderlabs.github.io/images/posts/map-e-set-objetos-que-voce-deve-conhecer-em-javascript/post-cover.png"/>

    <!-- Article meta -->
    <meta property="article:author" content="Nilton Cesar"/>
    <meta property="article:section" content="javascript"/>
    <meta property="article:tag" content="javascript, es6, map, set, object, array"/>
    <meta property="article:published_time" content="2017-04-04T02:15:00-03:00"/>

    <!-- Google+ -->
    <meta itemprop="name" content="Map e Set: objetos que você deve conhecer em JavaScript"/>
    <meta itemprop="description" content="Map e Set podem parecer tipos totalmente novos, mas eles são velhos conhecidos da linguagem só que com superpoderes."/>
    <meta itemprop="image" content="https://dunderlabs.github.io/images/posts/map-e-set-objetos-que-voce-deve-conhecer-em-javascript/post-cover.png"/>

    <!-- General purpose meta -->
    <meta name="description" content="Map e Set podem parecer tipos totalmente novos, mas eles são velhos conhecidos da linguagem só que com superpoderes."/>
    <meta name="keywords" content="javascript, es6, map, set, object, array"/>

    <!-- FEED STUFFS  -->
        <link rel="alternate"  href="https://dunderlabs.github.io/feeds/all.atom.xml" type="application/atom+xml" title="__labs__ Full Atom Feed"/>
    <!-- END FEED STUFFS  -->

        <title>Map e Set: objetos que você deve conhecer em JavaScript // __labs__</title>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://dunderlabs.github.io/theme/css/pure.css">
    <link rel="stylesheet" href="https://dunderlabs.github.io/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
<div class="pure-g-r" id="layout">
    <div class="sidebar sidebar-article pure-u">
        <header class="header-article">
            <hgroup>
                <a href="https://dunderlabs.github.io/author/nilton-cesar.html" title="See posts by Nilton Cesar">
                        <img class="avatar" alt="Nilton Cesar" src="https://www.gravatar.com/avatar/e1f8672236bde4309ecfa8cebf6b1e6a">
                </a>
                <h2 class="article-info">Nilton Cesar</h2>
                <small class="about-author"></small>
                <h5>Publicado</h5>
                <p>04/04/2017</p>
                <a href="/">&larr; Home</a>
            </hgroup>
        </header>
    </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Map e Set: objetos que você deve conhecer em JavaScript</h1>
                        <p class="post-meta">
                            // tags                                 <a class="post-category" href="https://dunderlabs.github.io/tag/javascript.html">javascript</a>
                                <a class="post-category" href="https://dunderlabs.github.io/tag/es6.html">es6</a>
                                <a class="post-category" href="https://dunderlabs.github.io/tag/map.html">map</a>
                                <a class="post-category" href="https://dunderlabs.github.io/tag/set.html">set</a>
                                <a class="post-category" href="https://dunderlabs.github.io/tag/object.html">object</a>
                                <a class="post-category" href="https://dunderlabs.github.io/tag/array.html">array</a>
                        </p>
                </header>
            </section>
            <p><img alt="Dentro de um objeto Map" src="https://dunderlabs.github.io/images/posts/map-e-set-objetos-que-voce-deve-conhecer-em-javascript/post-cover.png" /></p>
<p>Olá, dev amados!!!
Gostaria de abordar aqui alguns objetos desconhecidos pela maioria dos desenvolvedores JavaScript, mas que podem ser bastante úteis.</p>
<blockquote>
<p>Mas porquê usá-los?!</p>
</blockquote>
<p>Você não é obrigado a usá-los. Na verdade, os objetos mencionados são parecidos com objetos já conhecidos como <code>Object</code> e <code>Array</code>, porém de certa forma <em>melhorados</em>. Cabe somente a você, desenvolvedor, decidir quando/se será sábio usá-los e onde.</p>
<h2>Map</h2>
<p><code>Map</code> é muito semelhante a <code>Object</code>: uma coleção de pares chave-valor, sendo possível adicionar novos pares, acessar, modificar e deletá-los. Porém, com duas fundamentais diferenças:</p>
<ol>
<li>qualquer objeto pode ser uma chave</li>
<li>um <code>Map</code> guarda a ordem dos pares</li>
</ol>
<p>Ok, talvez a primeira não seja tão interessante pois geralmente as chaves são usadas como referências para os valores, por isso são nomes ou números. Embora seja interessante pensar que é possível guardar, por exemplo, um <code>Array</code> como chave para algum outro valor <em>because reasons</em>.</p>
<p>Mas a segunda diferença, <strong>pra mim</strong>, é a mais importante (leia-se aplicável, prática): ele guarda a ordem dos pares, ou seja, assim é possível por exemplo realizar um loop num <code>Map</code> e confiar que a ordem da iteração será igual ao objeto internamente! O que não acontece com <code>Object</code>, onde geralmente você percorreria cada propriedade do próprio objeto e armazenaria num novo <code>Array</code>, ou algo do tipo dependendo do que deseja.</p>
<p>A forma de manipulação muda bastante também. Por exemplo, não é possível adicionar ou definir novos pares com a notação <code>.key = value</code>/<code>[key] = value</code>, e pegar novos valores só chamando <code>.key</code>/<code>[key]</code>, ao invés disso deve-se usar os métodos <code>.set</code> e <code>.get</code></p>
<p>Aqui criamos um objeto <code>Map</code> através do construtor <code>new</code>, setamos duas propriedades e mostramos o objeto recém-criado:</p>
<p><img alt="Novo Map criado" src="https://dunderlabs.github.io/images/posts/map-e-set-objetos-que-voce-deve-conhecer-em-javascript/new-map.png" /></p>
<p>Por ter a ordem de inserção preservada, poderíamos percorrê-lo por alguma das estruturas <code>for</code>, mas os objeto <code>Map</code> já tem o método <code>forEach</code>, com funcionamento quase igual aos objetos <code>Array</code>: recebe uma função (<em>callback</em>) que recebe dois argumentos, o primeiro sendo o valor da propriedade e o segundo o nome da propriedade (ordem inversa ao callback de <code>Array</code>s):</p>
<p><img alt="Método de iteração forEach em um objeto Map" src="{filename}/images/posts/map-e-set-objetos-que-voce-deve-conhecer-em-javascript/new-foreach.png" /></p>
<p>Outras diferençãs legais são o método <code>has</code> e a propriedade <code>size</code>! Quem já teve que contar quantas propriedades um <code>Object</code> tem, sabe como é penoso ter que fazer um loop no objeto, filtrar as propriedades usando <code>.hasOwnProperty()</code> e adicionar à um contador, ou usar <code>Object.keys(obj).length</code> pra quem usa ES6. Com o <code>Map</code> você só tem que acessar a propriedade <code>size</code> e TAH-DAH, é retornado o tamanho dele ;)</p>
<div class="highlight"><pre><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">b</span><span class="o">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">objSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// ES5 approach</span>
<span class="k">for</span><span class="p">(</span><span class="nx">prop</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">prop</span><span class="p">))</span>
        <span class="nx">objSize</span><span class="o">++</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">objSize</span><span class="p">);</span>

<span class="c1">// ES6 way</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">obj</span><span class="p">).</span><span class="nx">length</span><span class="p">);</span>

<span class="c1">// Getting Map&#39;s size</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">map</span><span class="p">.</span><span class="nx">size</span><span class="p">);</span>
</pre></div>


<h3>Quando utilizá-los?</h3>
<p>Na MDN tem uma <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Map#Objetos_e_mapas_comparados">excelente lista</a> de como identificar quando utilizar <code>Map</code> ao invés de <code>Object</code>:</p>
<blockquote>
<ul>
<li>As keys são desconhecidas até o tempo de execução, você precisa procurá-las dinamicamente?</li>
<li>Todos os valores sempre serão do mesmo tipo, e podem ser usados de forma intercambiável?</li>
<li>Você precisa de keys que não são strings?</li>
<li>Os pares key-value são adicionados ou removidos frequentemente?</li>
<li>Você tem uma quantidade de pares key-value arbitrária (de troca fácil) ?
A coleção é iterada?</li>
</ul>
</blockquote>
<p><a href="https://jsperf.com/map-vs-object-as-hashes/2">Alguns</a> <a href="https://jsperf.com/es6-map-vs-object-properties/2">testes</a> de performance apresentam diferenças entre as diversas formas de percorrer <code>Map</code>s e <code>Object</code>s. Então, be wise ao usá-los.</p>
<h2>Set</h2>
<p>Outro objeto bastante interessante é o <code>Set</code>, muito parecido com o nosso velho conhecido <code>Array</code>. Se <code>Map</code> está para <code>Object</code>, <code>Set</code> está para <code>Array</code> :D</p>
<p>A principal diferença conceitual entre objetos do tipo <code>Set</code> e arrays é que <code>Set</code> não aceita valores repetidos, ou seja, guarda <strong>somente somente valores únicos</strong>. Isso pode oferecer mais segurança no código.</p>
<p><code>Set</code> tem métodos de manipulação parecidos com <code>Map</code>: <code>add()</code> para adicionar novos itens, <code>delete()</code> para retirar o item (através do item, não do índice), <code>has()</code> pra verificar se o item existe, <code>forEach()</code> pra percorrê-lo, e <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Set">muitos outros</a>. A propriedade <code>size</code> também está presente retornando o tamanho.</p>
<p>É possível também facilmente criar um <code>Set</code> a partir de um Array passando ele dentro do construtor com <code>new</code>:</p>
<p><img alt="Set sendo criado a partir de um Array" src="https://dunderlabs.github.io/images/posts/map-e-set-objetos-que-voce-deve-conhecer-em-javascript/new-set.png" /></p>
<p>O interessante desse exemplo é como ele trata os valores repetidos: ele simplesmente pula as repetições e as desconsidera ;)</p>
<hr />
<p>O interessante desses dois tipos de objetos é que eles são como <code>Object</code> e <code>Array</code> porém ~ tunados ~ permitindo que se faça muita coisa facilmente, sem precisar brigar com a linguagem pra conseguir resolver o seu problema :D</p>
<p>Só fique atento com a compatibilidade! Eles vieram junto com o ES6, e caso você não esteja usando algum polyfill como o <a href="https://babeljs.io/learn-es2015/#ecmascript-2015-features-map-set-weak-map-weak-set">Babel</a> <code>babel-polyfill</code> tem que verificar se os ambientes onde esse código vai rodar os suportam.</p>
<p>Recomendo também conhecer os objetos "irmãos" desses, o <code>WeakMap</code> e o <code>WeakSet</code>, que são chamados <em>fracos</em> porque seus objetos internos podem ser coletados caso o <em>garbage collector</em> da <em>engine</em> decida que suas referências devem ser removidas. Talvez por isso eles não tenham tanto valor prático se você não estiver construindo uma grande aplicação ou digamos uma biblioteca, ou algo que exija bastante otimização de performance.</p>
<p>Você já conhecia esses objetos? Já o utlizou alguma vez? Se não, acredita que irá usar num próximo projeto? A melhor parte de escrever, além de aprender bastante pra poder explicar, é o feedback e o contato com a comunidade. Adoraria ouvir algo de vocês &lt;3</p>
<p>Brigado pela leitura :*</p>
            <div class="hr"></div>
            <a href="#" class="go-top">Ir para o topo</a>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "dunderlabs"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div><footer class="footer">
    <p>&copy; __labs__ &ndash;
        Built with <a href="https://github.com/PurePelicanTheme/pure">Pure Theme</a>
        for <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
</div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try {
            var pageTracker = _gat._getTracker("UA-72641866-1");
            pageTracker._trackPageview();
            } catch(err) {}
    </script>
</body>
</html>